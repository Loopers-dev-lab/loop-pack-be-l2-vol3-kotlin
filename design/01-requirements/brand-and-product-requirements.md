# API 요구사항 명세서

## 📦 범위: 브랜드 & 상품

---

## 📊 개념 모델

### 액터 (Actor)

| 액터 | 설명 |
|------|------|
| **사용자 (User)** | 비인증 상태로 브랜드/상품 정보 조회 가능 |
| **회원 (Member)** | 로그인한 사용자, 좋아요 기능 사용 가능 |

### 핵심 도메인 (Core Domain)

| 도메인 | 책임 |
|--------|------|
| **브랜드 (Brand)** | 브랜드 정보 관리 |
| **상품 (Product)** | 상품 정보 관리, 브랜드 귀속, 상태 관리 |
| **좋아요 (Like)** | 회원-상품 간 좋아요 관계 관리 |

### 보조 시스템 (Supporting System)

| 시스템 | 역할 |
|--------|------|
| **캐시 시스템** | 조회 성능 최적화, 좋아요 수 캐싱 |
| **인증 시스템** | 좋아요 기능 사용 시 회원 인증 |

### 엔티티 관계도

```
┌─────────┐  1    N  ┌─────────┐  N    1  ┌─────────┐
│  Brand  │ ◀─────── │ Product │ ◀─────── │  Like   │
└─────────┘          └─────────┘          └─────────┘
                          │                    │
                          │                    │ N
                          │                    ▼
                          │              ┌─────────┐
                          └──────────────│ Member  │
                                         └─────────┘
```

### 상품 상태 (Product Status)

```
┌──────────────┐
│   ACTIVE     │ ──▶ 노출 O
├──────────────┤
│   SOLD_OUT   │ ──▶ 노출 O (품절 표시)
├──────────────┤
│   INACTIVE   │ ──▶ 노출 X
└──────────────┘
```

---

## 📖 유저 스토리 (User Stories)

### 브랜드 조회

| ID | 역할 | 스토리 |
|----|------|--------|
| US-B01 | 사용자 | 브랜드 ID로 브랜드 상세 정보를 조회한다 |
| US-B02 | 사용자 | 존재하지 않는 브랜드 조회 시 404 에러를 반환받는다 |

### 상품 목록 조회

| ID | 역할 | 스토리 |
|----|------|--------|
| US-P01 | 사용자 | 전체 상품 목록을 페이징하여 조회한다 |
| US-P02 | 사용자 | 상품 목록을 최신 등록순으로 정렬하여 조회한다 |
| US-P03 | 사용자 | 상품 목록을 가격 높은순/낮은순으로 정렬하여 조회한다 |
| US-P04 | 사용자 | 상품 목록을 좋아요 많은순/적은순으로 정렬하여 조회한다 |
| US-P05 | 사용자 | 특정 브랜드의 상품만 필터링하여 조회한다 |
| US-P06 | 사용자 | 페이지당 조회 개수를 20/50/100개로 변경하여 조회한다 |
| US-P07 | 사용자 | 비활성(INACTIVE) 상품은 목록에서 제외하여 조회한다 |

### 상품 상세 조회

| ID | 역할 | 스토리 |
|----|------|--------|
| US-D01 | 사용자 | 상품 ID로 상품 상세 정보를 조회한다 |
| US-D02 | 사용자 | 존재하지 않는 상품 조회 시 404 에러를 반환받는다 |

---

## 📚 도메인 용어 정의

| 용어 | 영문 | 정의 |
|------|------|------|
| 브랜드 | Brand | 상품을 판매하는 주체. 브랜드명, 설명, 로고 등의 정보를 가진다 |
| 상품 | Product | 브랜드가 판매하는 개별 아이템. 하나의 브랜드에만 속한다 |
| 좋아요 | Like | 사용자가 상품에 대해 표시하는 관심 표현. 사용자당 상품별 1회만 가능하다 |
| 상품 상태 | Product Status | 상품의 현재 판매 가능 여부를 나타내는 값 (ACTIVE, SOLD_OUT, INACTIVE) |

---

## 🔄 기능 흐름 (Feature Flow)

### 1. 브랜드 정보 조회 흐름

```
[User] ──GET /api/v1/brands/{brandId}──▶ [Server]
                                              │
                                              ▼
                                       brandId 유효성 검증
                                              │
                          ┌───────────────────┴───────────────────┐
                          ▼                                       ▼
                    브랜드 존재                             브랜드 미존재
                          │                                       │
                          ▼                                       ▼
                   브랜드 정보 조회                         404 Not Found
                          │
                          ▼
               200 OK + 브랜드 정보 반환
```

### 2. 상품 목록 조회 흐름

```
[User] ──GET /api/v1/products?page=0&size=20&sort=createdAt,desc&brandId=1──▶ [Server]
                                                                                    │
                                                                                    ▼
                                                                          요청 파라미터 파싱
                                                                                    │
                                                                                    ▼
                                                                          size 값 검증 (20/50/100)
                                                                                    │
                                                                                    ▼
                                                                    상품 조회 조건 생성 (status != INACTIVE)
                                                                                    │
                                                                                    ▼
                                                              brandId 존재 시 브랜드 필터 적용
                                                                                    │
                                                                                    ▼
                                                                          정렬 조건 적용
                                                                                    │
                                                                                    ▼
                                                                          페이징 처리
                                                                                    │
                                                                                    ▼
                                                              200 OK + 상품 목록 (페이징 정보 포함) 반환
```

### 3. 상품 정보 조회 흐름

```
[User] ──GET /api/v1/products/{productId}──▶ [Server]
                                                  │
                                                  ▼
                                           productId 유효성 검증
                                                  │
                          ┌───────────────────────┴───────────────────────┐
                          ▼                                               ▼
                    상품 존재                                        상품 미존재
                          │                                               │
                          ▼                                               ▼
                   상품 정보 조회                                   404 Not Found
                   (브랜드 정보 포함)
                          │
                          ▼
               200 OK + 상품 정보 반환
```

---

## 1. 브랜드 정보 조회 API

### 목표
브랜드 정보를 조회하는 API를 개발한다

### 기본 정보

| 항목 | 내용 |
|------|------|
| Method | `GET` |
| Endpoint | `/api/v1/brands/{brandId}` |
| 인증 | 불필요 |

### 요구사항
- 브랜드 ID에 해당하는 브랜드 정보를 조회한다

### 제한사항
- 존재하지 않는 브랜드 ID로 조회 시 `404 Not Found` 에러를 반환한다

### 응답 예시
```json
{
  "brandId": 1,
  "name": "브랜드명",
  "description": "브랜드 설명",
  "logoUrl": "https://example.com/logo.png"
}
```

---

## 2. 상품 목록 조회 API

### 목표
상품 목록 조회 API를 개발한다

### 기본 정보

| 항목 | 내용 |
|------|------|
| Method | `GET` |
| Endpoint | `/api/v1/products` |
| 인증 | 불필요 |

### 요구사항

#### 페이징
- 상품 목록은 페이징 처리가 되어야 한다
- 페이지당 조회 개수: **기본 20개**, 변경 가능 (50, 100개)

#### 정렬 옵션
| 정렬 기준 | 파라미터 값 (예시) |
|----------|-------------------|
| 최근 등록순 | `sort=createdAt,desc` |
| 가격 높은순 | `sort=price,desc` |
| 가격 낮은순 | `sort=price,asc` |
| 좋아요 많은순 | `sort=likeCount,desc` |
| 좋아요 적은순 | `sort=likeCount,asc` |

#### 필터링
- `brandId` 파라미터를 통해 특정 브랜드에 속한 상품만 조회 가능

#### 상품 노출 규칙
| 상품 상태 | 노출 여부 |
|----------|----------|
| 활성 (ACTIVE) | ✅ 노출 |
| 품절 (SOLD_OUT) | ✅ 노출 |
| 비활성 (INACTIVE) | ❌ 미노출 |

### 도메인 규칙
- 상품은 하나의 브랜드에만 속한다
- 좋아요는 사용자별로 수행한다

### 요청 파라미터

| 파라미터 | 타입 | 필수 | 기본값 | 설명 |
|---------|------|------|-------|------|
| page | Integer | N | 0 | 페이지 번호 |
| size | Integer | N | 20 | 페이지당 조회 개수 (20, 50, 100) |
| sort | String | N | createdAt,desc | 정렬 기준 |
| brandId | Long | N | - | 브랜드 ID 필터 |

### 응답 예시
```json
{
  "content": [
    {
      "productId": 1,
      "name": "상품명",
      "price": 10000,
      "status": "ACTIVE",
      "likeCount": 150,
      "brand": {
        "brandId": 1,
        "name": "브랜드명"
      },
      "createdAt": "2026-02-13T00:00:00"
    }
  ],
  "page": 0,
  "size": 20,
  "totalElements": 100,
  "totalPages": 5
}
```

---

## 3. 상품 정보 조회 API

### 목표
상품 정보 조회 API를 개발한다

### 기본 정보

| 항목 | 내용 |
|------|------|
| Method | `GET` |
| Endpoint | `/api/v1/products/{productId}` |
| 인증 | 불필요 |

### 요구사항
- 상품 ID에 해당하는 상품 정보를 조회한다

### 제한사항
- 존재하지 않는 상품 ID로 조회 시 `404 Not Found` 에러를 반환한다

### 응답 예시
```json
{
  "productId": 1,
  "name": "상품명",
  "description": "상품 설명",
  "price": 10000,
  "status": "ACTIVE",
  "likeCount": 150,
  "brand": {
    "brandId": 1,
    "name": "브랜드명",
    "logoUrl": "https://example.com/logo.png"
  },
  "createdAt": "2026-02-13T00:00:00",
  "updatedAt": "2026-02-13T00:00:00"
}
```

