---
name: commit
description:
  Tidy First 규칙에 따라 커밋을 생성한다.
  검증 보고서를 먼저 출력하고, 구조적/행위적 변경을 분리하여 커밋한다.
---

## 절차

1. 린트 + 테스트 검증 및 보고:
    - `./gradlew ktlintCheck` 실행
    - `./gradlew test` 실행
    - `git status`로 변경 파일 확인
    - 아래 형식으로 검증 결과 보고:

    ```
    ## 검증 결과

    ### 린트 (ktlintCheck)
    - 상태: 통과 / 실패
    - 실패 시: 파일명, 위치, 위반 규칙

    ### 테스트
    - 상태: 통과 / 실패
    - 전체: N개 / 성공: N개 / 실패: N개

    ### 변경 파일
    - 새 파일: N개 / 수정 파일: N개 / 삭제 파일: N개

    ### 판정
    - 커밋 가능 / 수정 필요
    ```

    - 통과하지 않으면 커밋 중단, 린트 실패 시 `ktlintFormat` 안내
2. `git diff`로 변경 내용 분석
3. `git log --oneline -10`으로 최근 커밋 스타일 확인
4. 변경 유형 판단:
    - **구조적 변경**: 이름 변경, 메서드 추출, 코드 이동, import 정리
    - **행위적 변경**: 기능 추가, 버그 수정, 테스트 추가
5. 구조적 + 행위적이 섞여 있으면 분리를 제안
6. 커밋 메시지를 한국어로 작성
7. 개발자 확인 후 커밋

## 커밋 메시지 형식

```
유형: 변경 내용 요약

상세 설명 (필요한 경우)
```

유형: `feat:`, `refactor:`, `fix:`, `test:`, `docs:`, `chore:`

## 규칙

- 모든 테스트 통과 + 린터 경고 없을 때만 커밋
- 구조적 변경과 행위적 변경을 절대 같은 커밋에 섞지 않는다
- 작고 빈번한 커밋을 지향
