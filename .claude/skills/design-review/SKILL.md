---
name: design-review
description:
  지정된 디렉토리의 설계 문서 4개(요구사항, 시퀀스, 클래스, ERD)를 리뷰하고 체크리스트를 검증한다.
  PR 제출 전 설계 품질을 확인하는 데 사용한다.
---

대상 디렉토리: $ARGUMENTS

- `$ARGUMENTS`가 없으면 `docs/design/`을 기본값으로 사용한다.

## 절차

1. 대상 디렉토리의 모든 설계 문서를 읽는다:
    - `01-requirements.md` (또는 `01-requirements-v2.md` 등 변형) — 요구사항 명세
    - `02-sequence-diagrams.md` — 시퀀스 다이어그램
    - `03-class-diagram.md` — 클래스 다이어그램
    - `04-erd.md` — ERD

2. 각 문서를 아래 기준으로 리뷰한다:

### 요구사항 (01)

- 유저 시나리오가 사용자 관점에서 작성되었는가?
- 예외/조건 분기가 포함되었는가?
- 유비쿼터스 언어가 정의되었는가?

### 시퀀스 다이어그램 (02)

- 최소 2개 이상 존재하는가?
- 책임 객체가 명확히 드러나는가?
- 트랜잭션 경계가 표시되었는가?
- Happy Path가 명확하고, 예외 흐름은 요구사항 명세서에 위임되었는가?
- Facade는 다중 서비스 조율 시에만 사용되었는가? (1:1 pass-through Facade가 남아있지 않은가?)

### 클래스 다이어그램 (03)

- Entity/VO 구분이 적절한가?
- 비즈니스 메서드가 포함되었는가?
- 의존 방향이 올바른가?
- 한 객체에 책임이 과도하게 집중되지 않았는가?

### ERD (04)

- 클래스 다이어그램과 정합성이 맞는가?
- 관계의 주인이 명확한가?
- 인덱스가 필요한 컬럼이 식별되었는가?
- soft delete, 상태 관리가 고려되었는가?

3. 체크리스트를 검증한다:
    - [ ] 도메인이 빠짐없이 포함되었는가
    - [ ] 기능 요구사항이 유저 중심
    - [ ] 시퀀스에서 책임 객체가 드러남
    - [ ] 클래스 구조가 도메인 설계 표현
    - [ ] ERD 데이터 정합성 고려

4. 리뷰 결과를 보고한다:
    - 각 문서별 피드백 (강점 + 개선점)
    - 체크리스트 통과 여부
    - PR 제출 전 수정이 필요한 항목
    - 설계의 헛점 (Agent 가 만들어도 내가 못잡으면 버그가 되는것)
    - 지식의 헛점 (Agent 의 코드를 검증하는데 알아야 할 지식)
    - 현재 설계에서 위험 요소와 대안

## 규칙

- 정답을 제시하지 말고 선택지를 제공
- 설계 리뷰 톤 유지 (강의 X)
- 코드보다 의도, 책임, 경계를 중요하게 다룸
