# DEC-001: 좋아요 중복 요청 처리 정책

| 항목 | 내용 |
|------|------|
| **상태** | OPEN |
| **관련 도메인** | Likes |
| **관련 요구사항** | UC-L01 좋아요 등록 |

## 기능적 요구사항

사용자가 이미 좋아요한 상품에 다시 좋아요를 요청했을 때의 동작을 결정해야 한다.

## 미결정 사항

POST 시 이미 좋아요가 존재하는 경우의 처리 방식:

| 선택지 | 설명 | 장점 | 단점 |
|--------|------|------|------|
| **토글(삭제)** | 좋아요가 있으면 삭제, 없으면 생성 | 단일 API로 간단한 UX | POST 의미론과 불일치, 향후 반응 유형 확장 시 부적합 |
| **무시(200 OK)** | 이미 좋아요가 있으면 성공 반환 | 멱등성 보장, 재시도에 안전 | 클라이언트가 현재 상태를 정확히 알기 어려움 |
| **에러(409 CONFLICT)** | 중복 좋아요 시 에러 반환 | 명확한 상태 피드백 | 클라이언트가 상태를 미리 알아야 하는 부담 |

## 진짜 필요한 것

클라이언트가 좋아요 상태를 **예측 가능하게 제어**할 수 있는 API 설계.

핵심 질문:
- 프론트엔드가 현재 좋아요 상태를 알고 있는가?
- 네트워크 재시도 시 부작용이 없는가?
- POST/DELETE 분리 vs 단일 토글 API 중 어떤 것이 클라이언트에 더 적합한가?

## 변경 가능성

- 향후 좋아요 이외의 반응(북마크 등)이 추가되면 토글 방식이 부적합할 수 있음
- 현재 POST/DELETE 분리 구조를 유지하면 토글은 선택지에서 제외됨

## 참고
- 메타 API 설계: https://developers.facebook.com/docs/graph-api/reference/object/likes/
- 현재 API 설계: `POST /api/v1/products/{productId}/likes` (등록), `DELETE /api/v1/products/{productId}/likes` (취소)
