# DEC-007: 사용자 미존재 시 응답 코드 (보안 관점)

| 항목 | 내용 |
|------|------|
| **상태** | DECIDED |
| **현재 결정** | 404 NOT_FOUND (명확한 에러 메시지 우선) |
| **관련 도메인** | Users |
| **관련 요구사항** | 인증 방식 — Customer 인증 |

## 기능적 요구사항

인증 시 사용자가 존재하지 않을 때의 HTTP 응답 코드.

## 현재 결정

**404 NOT_FOUND** — 명확한 에러 메시지를 우선하는 방향으로 결정.

| 선택지 | 설명 | 장점 | 단점 |
|--------|------|------|------|
| **404 NOT_FOUND** (현재) | 사용자 미존재를 명시적으로 반환 | 개발/디버깅 편의, 사용자에게 명확한 피드백 | 사용자 열거 공격(User Enumeration Attack) 취약 |
| **401 UNAUTHORIZED** | 인증 실패로 통합 반환 | 사용자 존재 여부 비노출, 보안 강화 | 사용자에게 "ID가 틀린 건지, 비밀번호가 틀린 건지" 알 수 없음 |

## 진짜 필요한 것

사용자 열거 공격(User Enumeration Attack)을 **방지**하면서도 사용자에게 **유용한 에러 피드백**을 제공하는 인증 응답 정책.

핵심 질문:
- 현재 서비스의 보안 위협 수준은? (학습 프로젝트 vs 실서비스)
- 인증 헤더 기반(매 요청 ID/PW 전송) 구조에서 열거 공격의 실질적 위험은?
- Rate limiting 등 다른 보안 수단으로 열거 공격을 충분히 방어할 수 있는가?

## 변경 가능성

- 보안 요구사항 강화 시 404 → 401로 통합할 수 있음
- 현재는 명확성 우선으로 404를 유지하되, 변경 가능성을 인지

## 참고

- 현재 인증 실패 시나리오: 헤더 누락(401), 사용자 미존재(404), 비밀번호 불일치(401)
- OWASP: User Enumeration Prevention
