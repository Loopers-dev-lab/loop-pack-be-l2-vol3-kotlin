# DEC-008: 브랜드 삭제 시 연관 데이터 처리 범위

| 항목 | 내용 |
|------|------|
| **상태** | OPEN |
| **관련 도메인** | Brands, Products, Likes, Orders |
| **관련 요구사항** | UC-B04 브랜드 삭제 |

## 기능적 요구사항

브랜드 삭제 시 해당 브랜드의 상품 연쇄 삭제(Soft Delete)는 확정. 그 상품에 연결된 좋아요, 주문의 처리 범위를 결정해야 한다.

## 확정 사항

- 브랜드 삭제 시 해당 브랜드의 **모든 상품을 Soft Delete** 한다

## 미결정 사항

| 항목 | 선택지 | 비고 |
|------|--------|------|
| 삭제된 상품의 **좋아요** | 유지(표시) / 유지(비표시) / 삭제 | 전시 정책 문제 |
| 주문 이력의 **삭제된 상품** | 원본 유지 / "삭제된 상품" 표시 / 스냅샷이므로 영향 없음 | 주문은 스냅샷 기반 |

### 좋아요 처리

| 선택지 | 설명 | 장점 | 단점 |
|--------|------|------|------|
| **유지 + 표시** | 좋아요 리스트에 삭제된 상품도 표시 (비활성 상태) | 사용자 이력 보존 | UI 복잡도 증가 |
| **유지 + 비표시** | 좋아요 데이터는 유지하되 조회 시 필터링 | 깔끔한 UX, 데이터 보존 | 사용자가 왜 사라졌는지 모름 |
| **연쇄 삭제** | 좋아요도 함께 삭제 | 깔끔한 데이터 | 이력 소실, 브랜드 부활 시 복구 불가 |

### 주문 이력 처리

주문은 **스냅샷 기반**이므로 상품 삭제와 무관하게 주문 시점의 정보가 보존된다. 다만 주문 상세 조회에서 원본 상품 링크 제공 여부는 결정 필요.

## 진짜 필요한 것

**전시(Display)와 도메인의 책임 분리**. 브랜드 도메인은 `is_deleted` 플래그만 제공하고, 전시 레이어가 필터링 정책을 결정하는 구조.

```
브랜드 도메인 → is_deleted 플래그 제공
전시 서비스   → 좋아요 리스트에서 삭제된 상품 필터링 여부를 자체 결정
```

핵심 원칙:
- 도메인은 상태(삭제 여부)만 관리
- 전시/조회는 전시 레이어가 정책을 결정
- 정책은 사업 요구에 따라 변경 가능해야 함

## 변경 가능성

- 사업 요구에 따라 **수시 변경 가능** (삭제 브랜드 표시/비표시, 브랜드 부활 등)
- 멘토 피드백: "유저향 정책은 계속 변할 수 있으므로 도메인과 분리해야 한다"

## 참고

- 프로젝트 기본 정책: Soft Delete, FK 미사용(앱 레벨 정합성)
