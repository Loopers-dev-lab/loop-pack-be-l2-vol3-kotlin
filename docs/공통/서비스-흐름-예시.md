# 서비스 흐름 예시

이 커머스 서비스에서 사용자가 경험하는 전체 흐름을 단계별로 설명합니다.

## 전체 흐름 요약

```
회원가입 → 상품 탐색 → 좋아요 → 쿠폰 발급 → 주문/결제 → 데이터 기록 및 확장
```

## 1단계: 회원가입

사용자가 서비스에 가입합니다.

- 로그인 ID, 비밀번호, 이름, 이메일, 생년월일 등의 정보를 입력합니다.
- 비밀번호는 검증 규칙(길이, 문자 조합, 연속 문자 제한 등)을 통과해야 합니다.
- 가입 완료 후 이후 모든 API 요청에서 `X-Loopers-LoginId`와 `X-Loopers-LoginPw` 헤더로 본인을 식별합니다.

```
POST /api/v1/members/sign-up
```

## 2단계: 상품 탐색 및 좋아요

사용자는 여러 브랜드의 상품을 둘러보고, 마음에 드는 상품에 좋아요를 누릅니다.

- 브랜드별, 카테고리별로 상품 목록을 조회합니다.
- 상품 상세 정보를 확인합니다.
- 관심 있는 상품에 좋아요를 등록하여 나중에 다시 찾아볼 수 있도록 합니다.
- 좋아요한 상품 목록을 별도로 조회할 수 있습니다.

```
GET  /api/v1/products              (상품 목록 조회)
GET  /api/v1/products/{productId}  (상품 상세 조회)
POST /api/v1/likes                 (좋아요 등록)
GET  /api/v1/likes                 (좋아요 목록 조회)
```

## 3단계: 쿠폰 발급

사용자는 사용할 수 있는 쿠폰을 발급받습니다.

- 발급 가능한 쿠폰 목록을 확인합니다.
- 원하는 쿠폰을 선택하여 발급받습니다.
- 발급받은 쿠폰은 주문 시 할인 혜택으로 적용할 수 있습니다.

## 4단계: 주문 및 결제

사용자는 여러 상품을 한 번에 주문하고 결제합니다.

- 구매할 상품과 수량을 선택하여 주문을 생성합니다.
- 하나의 주문에 여러 상품을 포함할 수 있습니다(복수 상품 주문).
- 보유한 쿠폰을 적용하여 결제 금액을 할인받을 수 있습니다.
- 주문 완료 후 주문 상세 내역을 확인할 수 있습니다.

```
POST /api/v1/orders                (주문 생성)
GET  /api/v1/orders                (주문 목록 조회)
GET  /api/v1/orders/{orderId}      (주문 상세 조회)
```

## 5단계: 데이터 기록 및 확장

유저의 모든 행동은 기록되며, 이 데이터는 이후 다양한 기능으로 확장될 수 있습니다.

- 좋아요 이력을 기반으로 개인화 추천 기능으로 확장할 수 있습니다.
- 주문 이력을 기반으로 재구매 유도, 리뷰 요청 등의 마케팅 기능에 활용할 수 있습니다.
- 쿠폰 사용 패턴을 분석하여 프로모션 전략을 수립할 수 있습니다.

## 어드민 관점

위 흐름에서 사용자가 접하는 데이터(브랜드, 상품, 주문 상태 등)는 어드민이 관리합니다.

- 어드민은 브랜드와 상품을 등록/수정합니다.
- 어드민은 주문 상태를 변경합니다(배송 준비, 배송 중, 배송 완료 등).
- 어드민 API는 `/api-admin/v1` prefix를 사용하며, `X-Loopers-Ldap` 헤더로 권한을 식별합니다.

```
POST  /api-admin/v1/brands                     (브랜드 등록)
POST  /api-admin/v1/products                   (상품 등록)
PATCH /api-admin/v1/orders/{orderId}/status     (주문 상태 변경)
```
